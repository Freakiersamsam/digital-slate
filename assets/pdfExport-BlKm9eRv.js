const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/jspdf.es.min-Dfqy657t.js","assets/index-DC5yak2z.js","assets/index-CU_Bohoc.css"])))=>i.map(i=>d[i]);
import{_ as U}from"./index-DC5yak2z.js";async function X({notes:h,slateInfo:i,sessionStart:E,filename:w="digital-slate-session.pdf"}){console.log("[DEBUG] exportSessionPDF called",{notes:h,slateInfo:i,sessionStart:E,filename:w});try{if(!h||h.length===0){alert("No notes to export!");return}const{jsPDF:m}=await U(async()=>{const{jsPDF:e}=await import("./jspdf.es.min-Dfqy657t.js").then(o=>o.j);return{jsPDF:e}},__vite__mapDeps([0,1,2])),t=new m({orientation:"portrait",unit:"mm",format:"a4",compress:!0}),l={primary:"#3a3a3a",secondary:"#6a6a6a",accent:"#e67e22",background:"#f7f5f3",cardBg:"#faf8f6",border:"#e8e4e0",text:{primary:"#4a4a4a",secondary:"#7a7a7a",light:"#999999"}},a=e=>{const o=e.replace("#",""),S=parseInt(o.substr(0,2),16),b=parseInt(o.substr(2,2),16),T=parseInt(o.substr(4,2),16);return[S,b,T]},r=20,g=210,c=g-r*2,P=30;t.setFillColor(255,255,255),t.rect(0,0,g,P,"F"),t.setTextColor(...a(l.primary)),t.setFontSize(20),t.setFont("helvetica","bold"),t.text("Digital Slate",r,18),t.setFontSize(10),t.setFont("helvetica","normal"),t.setTextColor(...a(l.text.secondary));const j=`Exported ${new Date().toLocaleDateString("en-US",{year:"numeric",month:"long",day:"numeric"})}`;t.text(j,g-r,18,{align:"right"});const x=P+10,F=45;t.setFillColor(...a(l.border)),t.roundedRect(r+1,x+1,c,F,3,3,"F"),t.setFillColor(...a(l.cardBg)),t.roundedRect(r,x,c,F,3,3,"F"),t.setDrawColor(...a(l.border)),t.setLineWidth(.5),t.roundedRect(r,x,c,F,3,3,"S"),t.setTextColor(...a(l.text.primary)),t.setFontSize(12),t.setFont("helvetica","bold"),t.text("Session Overview",r+8,x+10),t.setFontSize(8),t.setFont("helvetica","normal");const W=r+8,z=r+c/2+8,N=22,p=c/2-30,k=[{label:"Production:",value:(i==null?void 0:i.prod)||"Not specified"},{label:"Director:",value:(i==null?void 0:i.director)||"Not specified"},{label:"DOP:",value:(i==null?void 0:i.dop)||"Not specified"},{label:"Camera:",value:(i==null?void 0:i.camera)||"Not specified"}],G=[{label:"Started:",value:new Date(E).toLocaleString()},{label:"Roll:",value:(i==null?void 0:i.roll)||"Not specified"},{label:"Total Notes:",value:h.length.toString()},{label:"Location:",value:(i==null?void 0:i.location)||"Not specified"}];let y=x+18,D=x+18;k.forEach(e=>{t.setFont("helvetica","bold"),t.setTextColor(...a(l.text.secondary)),t.text(e.label,W,y),t.setFont("helvetica","normal"),t.setTextColor(...a(l.text.primary));let o=e.value;if(t.getTextWidth(o)>p){for(;t.getTextWidth(o+"...")>p&&o.length>0;)o=o.slice(0,-1);o+="..."}t.text(o,W+N,y),y+=7}),G.forEach(e=>{t.setFont("helvetica","bold"),t.setTextColor(...a(l.text.secondary)),t.text(e.label,z,D),t.setFont("helvetica","normal"),t.setTextColor(...a(l.text.primary));let o=e.value;if(t.getTextWidth(o)>p){for(;t.getTextWidth(o+"...")>p&&o.length>0;)o=o.slice(0,-1);o+="..."}t.text(o,z+N,D),D+=7});const u=x+F+20,R=12,v=14;t.setFillColor(...a(l.primary)),t.roundedRect(r,u,c,v,2,2,"F");const d=[{title:"Timecode",x:r+4,width:22,align:"left"},{title:"Relative",x:r+28,width:18,align:"left"},{title:"Scene",x:r+48,width:12,align:"center"},{title:"Take",x:r+62,width:12,align:"left"},{title:"Notes",x:r+76,width:110,align:"left"}];t.setTextColor(255,255,255),t.setFontSize(10),t.setFont("helvetica","bold"),d.forEach(e=>{e.align==="center"?t.text(e.title,e.x+e.width/2,u+9,{align:"center"}):t.text(e.title,e.x,u+9)});let n=u+v+2;t.setFont("helvetica","normal"),t.setFontSize(9),h.forEach((e,o)=>{var T,_;n>270&&(t.addPage(),n=30,t.setFillColor(...a(l.primary)),t.roundedRect(r,n-v,c,v,2,2,"F"),t.setTextColor(255,255,255),t.setFontSize(10),t.setFont("helvetica","bold"),d.forEach(s=>{s.align==="center"?t.text(s.title,s.x+s.width/2,n-5,{align:"center"}):t.text(s.title,s.x,n-5)}),n+=2,t.setFont("helvetica","normal"),t.setFontSize(9)),o%2===0&&(t.setFillColor(...a(l.background)),t.rect(r,n-2,c,R,"F"));const S=[{text:e.timecodeIn||"-",x:d[0].x},{text:e.relativeTime||"-",x:d[1].x},{text:((T=e.slateInfo)==null?void 0:T.scene)||"-",x:d[2].x},{text:((_=e.slateInfo)==null?void 0:_.take)||"-",x:d[3].x}];t.setTextColor(...a(l.text.primary)),S.forEach(s=>{t.text(s.text,s.x,n+6)});const b=e.content||"";if(b){const s=t.splitTextToSize(b,d[4].width),H=Math.floor((270-n)/4),f=Math.min(s.length,3,H);for(let C=0;C<f;C++){const O=s[C];let B=d[4].x;splitTextByEmoji(O).forEach(Y=>{t.setFont("helvetica","normal"),t.text(Y.text,B,n+6+C*4,{baseline:"top"}),B+=t.getTextWidth(Y.text)})}f>1&&(n+=(f-1)*4)}n+=R}),t.setFont("helvetica","normal");const L=t.internal.getNumberOfPages();for(let e=1;e<=L;e++)t.setPage(e),t.setDrawColor(...a(l.border)),t.setLineWidth(.5),t.line(r,285,g-r,285),t.setFontSize(8),t.setTextColor(...a(l.text.light)),t.setFont("helvetica","normal"),t.text("Generated by Digital Slate",r,290),t.text(`Page ${e} of ${L}`,g-r,290,{align:"right"});t.save(w),console.log("[DEBUG] PDF save triggered",w)}catch(m){console.error("[DEBUG] Error in exportSessionPDF:",m),alert("PDF export failed: "+m.message)}}export{X as exportSessionPDF};
