const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/jspdf.es.min-CaBIAnuS.js","assets/index-BNuLASuo.js","assets/index-CU_Bohoc.css"])))=>i.map(i=>d[i]);
import{_ as U}from"./index-BNuLASuo.js";async function X({notes:g,slateInfo:i,sessionStart:y,filename:A="digital-slate-session.pdf"}){console.log("[DEBUG] exportSessionPDF called",{notes:g,slateInfo:i,sessionStart:y,filename:A});try{let _=function(t){const u=/([\u231A-\u231B\u23E9-\u23EC\u23F0\u23F3\u25FD-\u25FE\u2614-\u2615\u2648-\u2653\u267F\u2693\u26A1\u26AA-\u26AB\u26BD-\u26BE\u26C4-\u26C5\u26CE\u26D4\u26EA\u26F2-\u26F3\u26F5\u26FA\u26FD\u2705\u270A-\u270B\u2728\u274C\u274E\u2753-\u2755\u2757\u2795-\u2797\u27B0\u27BF\u2B1B-\u2B1C\u2B50\u2B55\u1F004\u1F0CF\u1F18E\u1F191-\u1F19A\u1F1E6-\u1F1FF\u1F201-\u1F202\u1F21A\u1F22F\u1F232-\u1F23A\u1F250-\u1F251\u1F300-\u1F321\u1F324-\u1F393\u1F396-\u1F397\u1F399-\u1F39B\u1F39E-\u1F3F0\u1F3F3-\u1F3F5\u1F3F7-\u1F4FD\u1F4FF-\u1F53D\u1F549-\u1F54E\u1F550-\u1F567\u1F56F-\u1F570\u1F573-\u1F57A\u1F587\u1F58A-\u1F58D\u1F590\u1F595-\u1F596\u1F5A4-\u1F5A5\u1F5A8\u1F5B1-\u1F5B2\u1F5BC\u1F5C2-\u1F5C4\u1F5D1-\u1F5D3\u1F5DC-\u1F5DE\u1F5E1\u1F5E3\u1F5E8\u1F5EF\u1F5F3\u1F5FA-\u1F64F\u1F680-\u1F6C5\u1F6CB-\u1F6D2\u1F6E0-\u1F6E5\u1F6E9\u1F6EB-\u1F6EC\u1F6F0\u1F6F3-\u1F6F8\u1F910-\u1F93A\u1F93C-\u1F93E\u1F940-\u1F945\u1F947-\u1F94C\u1F950-\u1F96B\u1F980-\u1F997\u1F9C0\u1F9D0-\u1F9E6\u1FA70-\u1FA73\u1FA78-\u1FA7A\u1FA80-\u1FA82\u1FA90-\u1FA95\u1FAD0-\u1FAD9\u200D\uFE0F\u2640\u2642\u2695\u1F3FB-\u1F3FF])/gu,d=[];let n=0,s;for(;(s=u.exec(t))!==null;)s.index>n&&d.push({text:t.slice(n,s.index),isEmoji:!1}),d.push({text:s[0],isEmoji:!0}),n=u.lastIndex;return n<t.length&&d.push({text:t.slice(n),isEmoji:!1}),d};if(!g||g.length===0){alert("No notes to export!");return}const{jsPDF:p}=await U(async()=>{const{jsPDF:t}=await import("./jspdf.es.min-CaBIAnuS.js").then(u=>u.j);return{jsPDF:t}},__vite__mapDeps([0,1,2])),e=new p({orientation:"portrait",unit:"mm",format:"a4",compress:!0}),F={primary:"#3a3a3a",secondary:"#6a6a6a",accent:"#e67e22",background:"#f7f5f3",cardBg:"#faf8f6",border:"#e8e4e0",text:{primary:"#4a4a4a",secondary:"#7a7a7a",light:"#999999"}},r=t=>{const u=t.replace("#",""),d=parseInt(u.substr(0,2),16),n=parseInt(u.substr(2,2),16),s=parseInt(u.substr(4,2),16);return[d,n,s]},o=20,m=210,c=m-o*2,S=30;e.setFillColor(255,255,255),e.rect(0,0,m,S,"F"),e.setTextColor(...r(F.primary)),e.setFontSize(20),e.text("ðŸŽ¬ Digital Slate",o,18),e.setFontSize(10),e.setFont("helvetica","normal"),e.setTextColor(...r(F.text.secondary));const Y=`Exported ${new Date().toLocaleDateString("en-US",{year:"numeric",month:"long",day:"numeric"})}`;e.text(Y,m-o,18,{align:"right"});const h=S+10,C=45;e.setFillColor(...r(F.border)),e.roundedRect(o+1,h+1,c,C,3,3,"F"),e.setFillColor(...r(F.cardBg)),e.roundedRect(o,h,c,C,3,3,"F"),e.setDrawColor(...r(F.border)),e.setLineWidth(.5),e.roundedRect(o,h,c,C,3,3,"S"),e.setTextColor(...r(F.text.primary)),e.setFontSize(12),e.setFont("helvetica","bold"),e.text("Session Overview",o+8,h+10),e.setFontSize(8),e.setFont("helvetica","normal");const f=o+8,P=o+c/2+8,W=22,E=c/2-30,k=[{label:"Production:",value:(i==null?void 0:i.prod)||"Not specified"},{label:"Director:",value:(i==null?void 0:i.director)||"Not specified"},{label:"DOP:",value:(i==null?void 0:i.dop)||"Not specified"},{label:"Camera:",value:(i==null?void 0:i.camera)||"Not specified"}],G=[{label:"Started:",value:new Date(y).toLocaleString()},{label:"Roll:",value:(i==null?void 0:i.roll)||"Not specified"},{label:"Total Notes:",value:g.length.toString()},{label:"Location:",value:(i==null?void 0:i.location)||"Not specified"}];let T=h+18,B=h+18;k.forEach(t=>{e.setFont("helvetica","bold"),e.setTextColor(...r(F.text.secondary)),e.text(t.label,f,T),e.setFont("helvetica","normal"),e.setTextColor(...r(F.text.primary));let u=t.value;if(e.getTextWidth(u)>E){for(;e.getTextWidth(u+"...")>E&&u.length>0;)u=u.slice(0,-1);u+="..."}e.text(u,f+W,T),T+=7}),G.forEach(t=>{e.setFont("helvetica","bold"),e.setTextColor(...r(F.text.secondary)),e.text(t.label,P,B),e.setFont("helvetica","normal"),e.setTextColor(...r(F.text.primary));let u=t.value;if(e.getTextWidth(u)>E){for(;e.getTextWidth(u+"...")>E&&u.length>0;)u=u.slice(0,-1);u+="..."}e.text(u,P+W,B),B+=7});const D=h+C+20,z=12,v=14;e.setFillColor(...r(F.primary)),e.roundedRect(o,D,c,v,2,2,"F");const x=[{title:"Timecode",x:o+4,width:22,align:"left"},{title:"Relative",x:o+28,width:18,align:"left"},{title:"Scene",x:o+48,width:12,align:"center"},{title:"Take",x:o+62,width:12,align:"left"},{title:"Notes",x:o+76,width:110,align:"left"}];e.setTextColor(255,255,255),e.setFontSize(10),e.setFont("helvetica","bold"),x.forEach(t=>{t.align==="center"?e.text(t.title,t.x+t.width/2,D+9,{align:"center"}):e.text(t.title,t.x,D+9)});let l=D+v+2;e.setFont("helvetica","normal"),e.setFontSize(9),g.forEach((t,u)=>{var s,R;l>270&&(e.addPage(),l=30,e.setFillColor(...r(F.primary)),e.roundedRect(o,l-v,c,v,2,2,"F"),e.setTextColor(255,255,255),e.setFontSize(10),e.setFont("helvetica","bold"),x.forEach(a=>{a.align==="center"?e.text(a.title,a.x+a.width/2,l-5,{align:"center"}):e.text(a.title,a.x,l-5)}),l+=2,e.setFont("helvetica","normal"),e.setFontSize(9)),u%2===0&&(e.setFillColor(...r(F.background)),e.rect(o,l-2,c,z,"F"));const d=[{text:t.timecodeIn||"-",x:x[0].x},{text:t.relativeTime||"-",x:x[1].x},{text:((s=t.slateInfo)==null?void 0:s.scene)||"-",x:x[2].x},{text:((R=t.slateInfo)==null?void 0:R.take)||"-",x:x[3].x}];e.setTextColor(...r(F.text.primary)),d.forEach(a=>{e.text(a.text,a.x,l+6)});const n=t.content||"";if(n){const a=e.splitTextToSize(n,x[4].width),H=Math.floor((270-l)/4),w=Math.min(a.length,3,H);for(let b=0;b<w;b++){const O=a[b];let j=x[4].x;_(O).forEach(L=>{e.setFont("helvetica","normal"),e.text(L.text,j,l+6+b*4,{baseline:"top"}),j+=e.getTextWidth(L.text)})}w>1&&(l+=(w-1)*4)}l+=z}),e.setFont("helvetica","normal");const N=e.internal.getNumberOfPages();for(let t=1;t<=N;t++)e.setPage(t),e.setDrawColor(...r(F.border)),e.setLineWidth(.5),e.line(o,285,m-o,285),e.setFontSize(8),e.setTextColor(...r(F.text.light)),e.setFont("helvetica","normal"),e.text("Generated by Digital Slate",o,290),e.text(`Page ${t} of ${N}`,m-o,290,{align:"right"});e.save(A),console.log("[DEBUG] PDF save triggered",A)}catch(p){console.error("[DEBUG] Error in exportSessionPDF:",p),alert("PDF export failed: "+p.message)}}export{X as exportSessionPDF};
